<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.example.demo.mapper.BoardMapper">

    <sql id="search">
        <where>
            <if test="searchKey != null and searchKey != ''">
                btitle like concat('%', #{searchKey}, '%')
            </if>
        </where>
    </sql>

    <select
        id="boardCount"
        resultType="int"
    >
        SELECT
        COUNT(*)
        FROM tb_board
    </select>


    <select 
        id="getList" 
        resultType="BoardVO"
    >
		select *
        FROM tb_board
        <include refid="search"/>
		order by bno desc limit #{skip}, #{size}
    </select>
</mapper>